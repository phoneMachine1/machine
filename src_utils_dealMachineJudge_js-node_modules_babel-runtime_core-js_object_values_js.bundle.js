/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkmachine_front"] = self["webpackChunkmachine_front"] || []).push([["src_utils_dealMachineJudge_js-node_modules_babel-runtime_core-js_object_values_js"],{

/***/ "./src/api/deliverReceiptApi.js":
/*!**************************************!*\
  !*** ./src/api/deliverReceiptApi.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\n\nvar _assign = __webpack_require__(/*! babel-runtime/core-js/object/assign */ \"./node_modules/babel-runtime/core-js/object/assign.js\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nexports.getDeliverReceipt = getDeliverReceipt;\nexports.getReceiveReceipt = getReceiveReceipt;\nexports.getDeliverReceiptById = getDeliverReceiptById;\nexports.getDeliverReceiptByDeliverMachineId = getDeliverReceiptByDeliverMachineId;\nexports.createDeliverReceipt = createDeliverReceipt;\nexports.deleteDeliverReceipt = deleteDeliverReceipt;\nexports.releaseDeliverReceipt = releaseDeliverReceipt;\nexports.getReceiveDeliverReceipt = getReceiveDeliverReceipt;\n\nvar _myAxios = __webpack_require__(/*! ../utils/myAxios */ \"./src/utils/myAxios.js\");\n\nvar _myAxios2 = _interopRequireDefault(_myAxios);\n\nvar _qs = __webpack_require__(/*! qs */ \"./node_modules/qs/lib/index.js\");\n\nvar _qs2 = _interopRequireDefault(_qs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar BASE_URL = \"/deliver/receipt\";\n\n// 获取转交单信息\nfunction getDeliverReceipt(currentPage, size, receipt) {\n  var test = (0, _assign2.default)(receipt, { currentPage: currentPage, size: size });\n  return (0, _myAxios2.default)({\n    url: BASE_URL + '/',\n    method: 'get',\n    params: test,\n    paramsSerializer: function paramsSerializer(params) {\n      return _qs2.default.stringify(params, { arrayFormat: 'repeat' });\n    }\n  });\n}\n\n// 获取需要接收的转交单\nfunction getReceiveReceipt(currentPage, size, receipt) {\n  var test = (0, _assign2.default)(receipt, { currentPage: currentPage, size: size });\n  return (0, _myAxios2.default)({\n    url: BASE_URL + '/receive',\n    method: 'get',\n    params: test,\n    paramsSerializer: function paramsSerializer(params) {\n      return _qs2.default.stringify(params, { arrayFormat: 'repeat' });\n    }\n  });\n}\n\n//通过receiptId获取转交单\nfunction getDeliverReceiptById(receiptId) {\n  return (0, _myAxios2.default)({\n    url: BASE_URL + '/getByMachineId/?receiptId=' + receiptId,\n    method: 'get'\n  });\n}\n\n//通过deliverMachineId获取转交单\nfunction getDeliverReceiptByDeliverMachineId(deliverMachineId) {\n  return (0, _myAxios2.default)({\n    url: BASE_URL + '/getByDeliverMachineId/?deliverMachineId' + deliverMachineId,\n    method: 'get'\n  });\n}\n\n// 添加转交单信息\nfunction createDeliverReceipt(receipt) {\n  receipt.receiveEmpIds = receipt.receiveEmpIds.toString();\n  return (0, _myAxios2.default)({\n    url: BASE_URL + '/',\n    method: 'put',\n    data: receipt\n  });\n}\n\n//删除转交单\nfunction deleteDeliverReceipt(receiptId) {\n  return (0, _myAxios2.default)({\n    url: BASE_URL + '/?receiptId=' + receiptId,\n    method: 'delete'\n  });\n}\n\n//发布转交单\nfunction releaseDeliverReceipt(receiptId) {\n  return (0, _myAxios2.default)({\n    url: BASE_URL + '/release?receiptId=' + receiptId,\n    method: 'get'\n  });\n}\n\n// 获取用户id需要接收的转交单\nfunction getReceiveDeliverReceipt() {\n  return (0, _myAxios2.default)({\n    url: BASE_URL + '/receive',\n    method: 'get'\n  });\n}\n\n//# sourceURL=webpack://machine-front/./src/api/deliverReceiptApi.js?");

/***/ }),

/***/ "./src/utils/dealMachineJudge.js":
/*!***************************************!*\
  !*** ./src/utils/dealMachineJudge.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\n\nvar _promise = __webpack_require__(/*! babel-runtime/core-js/promise */ \"./node_modules/babel-runtime/core-js/promise.js\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nexports.dealMachineJudge = dealMachineJudge;\n\nvar _deliverReceiptApi = __webpack_require__(/*! ../api/deliverReceiptApi */ \"./src/api/deliverReceiptApi.js\");\n\nvar _deliverMachineApi = __webpack_require__(/*! ../api/deliverMachineApi */ \"./src/api/deliverMachineApi.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction dealMachineJudge(machine, store, operateName) {\n\n  if (['addMachineToEnterStorage', 'marketReturnEnterStorage'].indexOf(operateName) === -1 && machine.storageLocationId === null) {\n    return _promise2.default.resolve({\n      \"code\": -1,\n      message: \"该机器还没有入库!!!\"\n    });\n  }\n\n  if ([20, 21, 23, 25, 27, 28, 30, 34].indexOf(machine.statusId) !== -1) {\n    return _promise2.default.resolve({\n      \"code\": -1,\n      message: \"该机器状态是\" + store.state.machineStatusCorr[machine.statusId] + \", 操作人是\" + store.state.employeeNameCorr[machine.operateEmpId]\n    });\n  }\n\n  if (machine.deliverReceiptId !== 0) {\n    return (0, _deliverReceiptApi.getDeliverReceiptById)(machine.deliverReceiptId).then(function (resp) {\n      if (resp.data.obj) {\n        var deliverReceipt = resp.data.obj;\n        return (0, _deliverMachineApi.getDeliverStatus)(machine.id, deliverReceipt.deliverReceiptId).then(function (resp) {\n          if (resp.data.obj === 0) {\n            return _promise2.default.resolve({\n              \"code\": -1,\n              \"message\": \"该机器正处于待转交状态\" + \"操作人是：\" + store.state.employeeNameCorr[deliverReceipt.operateEmpId]\n            });\n          } else if (resp.data.obj === 1) {\n            if (deliverReceipt.receiveEmpIds.split(',').indexOf(JSON.parse(window.sessionStorage.getItem(\"user\"))['id'] + '') === -1) {\n              var receiveEmp = \"\";\n              deliverReceipt['receiveEmpIds'].split(',').forEach(function (item) {\n                receiveEmp += store.state.employeeNameCorr[item] + '、';\n              });\n              return _promise2.default.resolve({ \"code\": -1, \"message\": \"该机器正处于转交中状态，你不是接收人, 请交给以下接收人: \" + receiveEmp });\n            } else if ([2, 7, 8].indexOf(deliverReceipt.deliverIntentionId) !== -1) {\n              return _promise2.default.resolve({ \"code\": -1, \"message\": \"该机器处于库存调拨中，请通过入库方式来接收\" });\n            } else {\n              var receiveDialog = {};\n              return (0, _deliverMachineApi.receiveDeliverMachine)(machine.id).then(function (resp) {\n                if (resp.data.code === 200) {\n                  receiveDialog = {\n                    title: '接收成功',\n                    message: '转交单类型：' + store.state.deliverIntentionCorr[deliverReceipt.deliverIntentionId],\n                    type: 'success',\n                    duration: 10000\n                  };\n                }\n              }).then(function () {\n                return machineStatusJudge(machine.statusId, operateName, store.state, receiveDialog);\n              });\n            }\n          }\n        });\n      } else {\n        return _promise2.default.resolve({ \"code\": -1, \"message\": \"数据有错误\" });\n      }\n    });\n  } else {\n    if (machine.operateEmpId !== store.state.userId) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"你不是该机器的现有处理人，你无权处理该机器！！！请给归还给\" + store.state.employeeNameCorr[machine.operateEmpId]\n      });\n    }\n    return _promise2.default.resolve(machineStatusJudge(machine.statusId, operateName, store.state));\n  }\n}\n\nfunction machineStatusJudge(statusId, operateName, state, receiveDialog) {\n  if (operateName === 'addMachineToPurchaseReturn') {\n    //往采购退货单中添加机器:   待入库 -> 退货中预定\n    if (statusId !== 2) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是待入库, 不能进行采购退货操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'confirmPurchaseReturnSuccess') {\n    //确定退货成功: 退货中 -> 退货成功\n    if (statusId !== 3) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是退货中, 不能进行退货成功操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'confirmPurchaseReturnFail') {\n    //确定退货失败: 退货中 -> 退货失败\n    if (statusId !== 3) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是退货中, 不能进行退货失败操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'upShelf') {\n    //机器上架:：待上架、已上架、提交并退回 -> 已上架\n    if ([10, 11, 36].indexOf(statusId) === -1) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是待上架、已上架、提交并退回, 不能进行上架操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'addMachineToMarketOrder') {\n    //往销售订单中添加机器: 已上架、待出库 -> 待销售\n    if (statusId !== 26) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是已上架，待出库中, 不能进行销售操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'addMachineToMarketReturn') {\n    //往销售退货订单中添加机器：已出库 -> 待销售退货\n    if (statusId !== 13) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是已上架，待出库中, 不能进行销售操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'addMachineToEnterStorage') {\n    // 往入库单中添加机器： 待入库、退货中(提示用户)、退货失败 -> 入库中\n    //if ([1, 3, 4].indexOf(statusId) === -1) {\n    //  return Promise.resolve({\n    //    \"code\": -1,\n    //    \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是待入库、退货中或退货失败中, 不能进行入库操作\",\n    //    \"receiveDiagLog\": receiveDialog\n    //  })\n    //}\n    if (statusId === 3) {\n      return _promise2.default.resolve({ \"code\": 0, \"message\": \"该机器为退货中，是否要入库\", \"receiveDiagLog\": receiveDialog });\n    }\n  } else if (operateName === 'addMachineToUpShelfEnterStorage') {\n    //往上架入库单中添加机器：已上架  -> 已上架，待入库\n    if (statusId !== 11) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是已上架中, 不能进行上架入库操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'addMachineToMarketReturnEnterStorage') {\n    //往销退入库单中添加机器：销售退货 -> 待消退入库\n    if (statusId !== 14) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是销售退货中, 不能进行销退入库操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'addMachineToSendFix') {\n    //往送外修单中添加机器：已确维修项、送修取回 -> 待送外修\n    if ([32, 31].indexOf(statusId) === -1) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是已确定维修项或送修取回中, 不能进行送外修操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  } else if (operateName === 'receiveSendFixMachine') {\n    // 送修取回：送外修 -> 送修取回\n    if (statusId === 17) {\n      return _promise2.default.resolve({\n        \"code\": -1,\n        \"message\": \"该机器状态是\" + state.machineStatusCorr[statusId] + \", 而不是送外修, 不能进行送外修操作\",\n        \"receiveDiagLog\": receiveDialog\n      });\n    }\n  }\n  return _promise2.default.resolve({ \"code\": 1, \"receiveDiagLog\": receiveDialog });\n}\n\n//# sourceURL=webpack://machine-front/./src/utils/dealMachineJudge.js?");

/***/ }),

/***/ "./node_modules/babel-runtime/core-js/object/values.js":
/*!*************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/values.js ***!
  \*************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("module.exports = { \"default\": __webpack_require__(/*! core-js/library/fn/object/values */ \"./node_modules/core-js/library/fn/object/values.js\"), __esModule: true };\n\n//# sourceURL=webpack://machine-front/./node_modules/babel-runtime/core-js/object/values.js?");

/***/ }),

/***/ "./node_modules/core-js/library/fn/object/values.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/values.js ***!
  \**********************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ../../modules/es7.object.values */ \"./node_modules/core-js/library/modules/es7.object.values.js\");\nmodule.exports = __webpack_require__(/*! ../../modules/_core */ \"./node_modules/core-js/library/modules/_core.js\").Object.values;\n\n\n//# sourceURL=webpack://machine-front/./node_modules/core-js/library/fn/object/values.js?");

/***/ }),

/***/ "./node_modules/core-js/library/modules/_object-to-array.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-to-array.js ***!
  \******************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("var DESCRIPTORS = __webpack_require__(/*! ./_descriptors */ \"./node_modules/core-js/library/modules/_descriptors.js\");\nvar getKeys = __webpack_require__(/*! ./_object-keys */ \"./node_modules/core-js/library/modules/_object-keys.js\");\nvar toIObject = __webpack_require__(/*! ./_to-iobject */ \"./node_modules/core-js/library/modules/_to-iobject.js\");\nvar isEnum = __webpack_require__(/*! ./_object-pie */ \"./node_modules/core-js/library/modules/_object-pie.js\").f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\n\n//# sourceURL=webpack://machine-front/./node_modules/core-js/library/modules/_object-to-array.js?");

/***/ }),

/***/ "./node_modules/core-js/library/modules/es7.object.values.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.object.values.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("// https://github.com/tc39/proposal-object-values-entries\nvar $export = __webpack_require__(/*! ./_export */ \"./node_modules/core-js/library/modules/_export.js\");\nvar $values = __webpack_require__(/*! ./_object-to-array */ \"./node_modules/core-js/library/modules/_object-to-array.js\")(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n\n\n//# sourceURL=webpack://machine-front/./node_modules/core-js/library/modules/es7.object.values.js?");

/***/ })

}]);